(function($) {
    $.fn.extend({
        IMGDEMO:function(opt) {
            
            var opt 	= arguments[0] ? arguments[0] :false;
            var $button = $(this).children("li")	;			//容器;
            var $sec 	= 3000						; 			//自动播放默认时间;
            var $min 	= $button.last().width() 	;			//最小宽度;
            var $max 	= $button.first().width() 	;			//最大宽度;
            var $index 	= 1   						;			//轮播开始索引号;
            
            $default = {										//默认参数;
                speed	:	opt.speed 	? 	opt.speed 						:	"slow"	,
                by		:	opt.by 		? 	opt.by 							:	"click"	,
                auto	:	opt.auto 	? 	opt.auto						:	false	,
                sec		:	opt.sec 	? 	opt.sec < 1000 ? 1000 : opt.sec	:	$sec	,
                maxWidth:	$max														,
                minWidth:	$min														,
                index	:	$index
            };            
            $button.bind($default.by, this.run).autoPlay();		//绑定事件;
        },
        run:function() {										//运行方法;
            var $obj = $(this);
            if ($obj.width() == $default.minWidth) {
                var timeDo = window.setTimeout(function() {
                    $default.index = $obj.index();
                    $obj.anim();
                }, 100);
                $obj.mouseout(function() {
                    window.clearTimeout(timeDo);
                });
            }
        },
        autoPlay:function() {									//自动播放;
            if ($default.auto) {
                var $this = $(this);
                $this.autoDo();
                $this.mouseover(function() {
                    window.clearInterval(timeL);
                });
                $this.mouseout(function() {
                    $this.autoDo();
                });
            }
        },
        autoDo:function() {										//播放方法;
            var $len 	= 	$(this).length - 1;
            var $this 	= 	$(this);
            	timeL 	= 	window.setInterval(function() {
                				$this.eq($default.index).anim();
                				$default.index < $len ? $default.index++ :$default.index = 0;
            				}, $default.sec);
        },
        anim:function() {										//动画方法;
            var $fx = function() {
                $(this).siblings("li").animate({
                    width	:	$default.minWidth,
                    opacity	:	0.5
                }, $default.speed).css("cursor", "pointer");
                $(this).animate({
                    width	:	$default.maxWidth,
                    opacity	:	1
                }, $default.speed).css("cursor", "default");
				
                $(this).siblings("li").children("div").fadeOut();
                $(this).children("div").fadeTo($default.speed,0.7);
                $(this).dequeue();
            };
            $(this).queue($fx);
        }
    });
})(jQuery);
	//图片轮播    
		$.fn.img_lb=function(){
			return this.each(function(){
				var $con=$(this);//包裹按钮和轮播的图片元素
				var sWidth = $con.width();
				var cov_length = $con.find("ul li").length;
				var index = 0;
				var picTimer;
				var btn = "<div class='buttons'>";
				for (var i = 0; i < cov_length; i++) {
					if(i==0){
						btn+="<span class='on'></span>";
					}else{
						btn+="<span></span>";
					}
				}
				$con.append(btn);
				$con.find(".buttons span").mouseover(function() {
					index = $con.find(".buttons span").index(this);
					showPics(index);
				}).eq(0).trigger("mouseover");
				$(".pre").click(function() {
					index -= 1;
					if (index == -1) {
						index = cov_length - 1;
					}
					showPics(index);
				});
				$(".next").click(function() {
					index += 1;
					if (index == cov_length) {
						index = 0;
					}
					showPics(index);
				});
				$con.find("ul").css("width", sWidth * (cov_length));
				$con.hover(function() {
					clearInterval(picTimer);
				}, function() {
					picTimer = setInterval(function() {
						showPics(index);
						index++;
						if (index == cov_length) {
							index = 0;
						}
					}, 3000);
				}).trigger("mouseleave");
				function showPics(index) { 
					var nowLeft = -index * sWidth;
					$con.find("ul").stop(true, false).animate({
						"left": nowLeft
					}, 300);
				    $con.find(".buttons span").removeClass("on").eq(index).addClass("on"); 				
				}
			})
		}
		//滚动
    var speed = 20; //数字越大速度越慢
	var tab_image_s = document.getElementById("demo_s");
	var tab1_s = document.getElementById("demo1_s");
	var tab2_s = document.getElementById("demo2_s");
	tab2_s.innerHTML = tab1_s.innerHTML;
	function Marquee() {
		if (tab2_s.offsetWidth - tab_image_s.scrollLeft <= 0)
			tab_image_s.scrollLeft -= tab1_s.offsetWidth
		else {
			tab_image_s.scrollLeft++;
		}
	}
	var MyMar = setInterval(Marquee, speed);
	tab_image_s.onmouseover = function() {
		clearInterval(MyMar)
	};
	tab_image_s.onmouseout = function() {
		MyMar = setInterval(Marquee, speed)
	};
	//切换
			  function tabfn(tt, cc, event, fn){
			    tt.eq(0).addClass('on');
			    cc.eq(0).addClass('dis');
			    tt.bind(event || 'mouseover', function (){
			      var i = tt.index(this);
			      tt.removeClass('on');
			      tt.eq(i).addClass('on');
			      cc.removeClass('dis');
			      cc.eq(i).addClass('dis');
			      if (typeof (fn) == 'function') fn(i);
			    });
			  };