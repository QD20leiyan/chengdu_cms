<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>我要吃鸡</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no">
    <link href="css/animate.min.css" rel="stylesheet"/>
    <link href="css/swiper-3.4.2.min.css" rel="stylesheet"/>
    <link href="css/index.css" rel="stylesheet"/>
    <script>
        (function (win,doc){
            if (!win.addEventListener) return;
            var html=document.documentElement;
            function setFont(cb) {
                var w = html.clientWidth, h = html.clientHeight;
//                if(w/h>2.1){
//                    html.style.fontSize= w > h ? w/1650*100+"px" : w/750*100+"px";
//                }else{
                    html.style.fontSize= w > h ? w/1334*100+"px" : w/750*100+"px";
//                }
                if(cb&&typeof (cb)=="function"){cb()}
                if(cb&&typeof (cb)=="function"){cb()}
            }
            setFont();
            doc.addEventListener('DOMContentLoaded',setFont,false);
            win.addEventListener('resize',setFont,false);
            win.addEventListener('load',setFont,false);
        })(window,document);
    </script>
</head>
<body>
<div class="wrap">
    <section class="public">
        <div class="clouds">
            <img class="cloud1" src="images/cloud1.png" alt="">
            <img class="cloud2" src="images/cloud2.png" alt="">
            <img class="cloud3" src="images/cloud3.png" alt="">
            <img class="cloud4" src="images/cloud4.png" alt="">
            <img class="cloud5" src="images/cloud5.png" alt="">
        </div>
        <div class="umbrellas">
            <img class="umbrella1" src="images/umbrella1.png" alt="">
            <img class="umbrella2" src="images/umbrella2.png" alt="">
        </div>
        <div class="tips">
            <img src="images/tip.png" alt=""/>
        </div>
        <div class="grasses">
            <img class="grass1" src="images/grass1.png" alt="">
            <img class="grass2" src="images/grass1.png" alt="">
        </div>
    </section>
    <div>
        <section class="loading_box">
            <div class="slogan">
                <img src="images/slogan.png" alt=""/>
            </div>
            <div class="loading">
                <canvas id="chick"></canvas>
                <div class="chickimg hidden"><img src="images/chick.png" alt=""></div>
                <div class="load_grass">
                    <img class="grass2" src="images/grass2.png" alt="">
                </div>
                <div class="progress">
                    <div class="prowarp">
                        <div class="probar"></div>
                    </div>
                </div>
            </div>
        </section>
        <section class="content">
            <div class="banner1">
                <div class="swiper-container swiper-container1">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img class="images" src="images/si1.png" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img class="images" src="images/si2.png" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img class="images" src="images/si3.png" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img class="images" src="images/si4.png" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img class="images" src="images/si5.png" alt="">
                        </div>
                        <div class="swiper-slide">
                            <a href="http://downurl.yingxiong.com/url/qmqz_cjss.html" class="download"><img src="images/download.png"></a>
                        </div>
                    </div>
                </div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                <!--弹框-->
                <div class="banner_tips hidden">
                    <div class="con">
                        <img src="images/banner_close.png" alt="" class="banner_close">
                        <div>
                            <div class="info info1 hidden">
                                <h1>CA精英选拔赛</h1>
                                <p>玩CA，拿现金，人人有机会！<span class="red">70000元</span>无门槛奖励等你来！</p>
                                <p>报名：<span class="red">无需报名！！！</span></p>
                                <p>比赛时间：12月14日至12日31日</p>
                                <p>规则：规定时间内进行冲榜，最终按照游戏内<span class="red">单人、双人</span>和<span class="red">多人积分榜</span>的榜单排名进行发奖。</p>
                            </div>
                            <div class="info info2 hidden">
                                <h1>CA大明星-主播表演赛</h1>
                                <p>CA大明星，今天就是你！——2017年度表演赛！</p>
                                <p>报名时间：12月14日至12月21日23：00</p>
                                <p>报名方式：申请加入赛事QQ群，向管理员报名，<span class="red">报名QQ群号：427688106</span></p>
                                <p>比赛时间：12月23日（淘汰赛）、12月30日（决赛）</p>
                                <p>比赛规则：比赛将通过“生存冒险”个人房间战进行，冠军主播可获得<span class="red">10000元</span>现金奖励，更多详情以群内信息为准。</p>
                            </div>
                            <div class="info info3 hidden">
                                <h1>CA战队联盟对抗赛</h1>
                                <p>战队辉煌，由你续写！</p>
                                <p>报名时间：12月18日至12月24日23：00</p>
                                <p>报名方式：通过<span class="red">游戏内赛事小队</span>报名获取“战队联盟对抗赛”参赛资格。</p>
                                <p>海选时间：12月23日至12月27日，每晚20：00-24：00。</p>
                                <p>海选规则：成功报名后，在“生存冒险”大厅中邀请小队成员组队，进行多人匹配比赛。按比赛时间段内<span class="red">前20场比赛</span>的<span class="red">总积分</span>进行排名，<span class="red">前15名</span>的队伍将进入决赛。</p>
                                <p>决赛时间：12月29日</p>
                                <p>决赛规则：决赛战队将通过“房间战”形式进行比赛，争夺<span class="red">20000元</span>战队奖金。</p>
                            </div>
                            <div class="info info4 hidden">
                                <h1>CA英雄跨年邀请赛</h1>
                                <p>高端玩家汇聚， 独一无二的“逃杀”跨年！</p>
                                <p>报名时间：12月25日至1月4日</p>
                                <p>报名方式：申请加入赛事QQ群，向管理员报名，<span class="red">报名QQ群：437648511。</span></p>
                                <p>比赛时间：1月6日</p>
                                <p>比赛规则：由官方组织并邀请选手，进入指定“生存冒险”房间进行比赛，角逐最终名次。</p>
                            </div>
                            <div class="info info5 hidden">
                                <p>关注全民枪战（quanminqiangzhan）官方微信公众号了解更多比赛详情</p>
                                <p><img src="images/banner_code.jpg" alt=""/></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="banner2">
                <div class="swiper-container swiper-container2">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move1 ani" swiper-animate-effect="zoomIn" src="images/move1.png" alt="">
                            <img class="move1-1 ani" src="images/move1-1.png" swiper-animate-effect="lightSpeedIn">
                        </div>
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move2 ani" src="images/move2.png" swiper-animate-effect="zoomIn" alt="">
                            <img class="move2-1 ani" swiper-animate-effect="bounceInDown" src="images/move2-1.png">
                        </div>
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move3-1 ani" swiper-animate-effect="lightSpeedIn" src="images/move3-1.png">
                            <img class="move3-2 ani" swiper-animate-effect="lightSpeedIn" swiper-animate-delay="0.2s" src="images/move3-2.png">
                            <img class="move3 ani" src="images/move3.png" swiper-animate-effect="zoomIn" alt="">
                        </div>
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move4-1 ani" swiper-animate-effect="bounceInDown" src="images/move4-1.png">
                            <img class="move4 ani " swiper-animate-effect="zoomIn" src="images/move4.png" alt="">
                            <img class="move4-2 ani" swiper-animate-effect="bounceInDown" src="images/move4-2.png">
                        </div>
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move5 ani" swiper-animate-effect="zoomIn" src="images/move5.png" alt="">
                            <img class="move5-1 ani" swiper-animate-effect="lightSpeedIn" src="images/move5-1.png">
                        </div>
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move6 ani" swiper-animate-effect="zoomIn" src="images/move6.png" alt="">
                            <img class="move6-1 ani" swiper-animate-effect="lightSpeedIn" src="images/move6-1.png">
                            <img class="move6-2 ani" swiper-animate-effect="lightSpeedIn" swiper-animate-delay="0.2s" src="images/move6-2.png">
                        </div>
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move7 ani" swiper-animate-effect="zoomIn" src="images/move7.png" alt="">
                            <img class="move7-3 ani" swiper-animate-effect="zoomIn" src="images/move7-3.png">
                            <img class="move7-1 ani" swiper-animate-effect="bounceInDown" src="images/move7-1.png">
                            <img class="move7-2 ani" swiper-animate-effect="bounceInDown" swiper-animate-delay="0.2s" src="images/move7-2.png">
                        </div>
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move8 ani" src="images/move8.png" swiper-animate-effect="zoomIn" alt="">
                            <img class="move8-1 ani" swiper-animate-effect="lightSpeedIn" src="images/move8-1.png">
                            <img class="move8-2 ani" swiper-animate-effect="bounceInDown" swiper-animate-delay="0.2s" src="images/move8-2.png">
                        </div>
                        <div class="swiper-slide swiper-no-swiping">
                            <img class="move9 ani" src="images/move9.png" swiper-animate-effect="zoomIn" alt="">
                            <img class="move9-1 ani" swiper-animate-effect="lightSpeedIn" src="images/move9-1.png">
                            <img class="move9-2 ani " swiper-animate-effect="fadeInDown" src="images/move9-2.png">
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </div>
</div>
<!--音乐-->
<audio id="music" src="audio/audio1.mp3" data-src="audio/audio.mp3" loop="loop"></audio>
<!--横竖屏-->
<div id="orientLayer" class="mod-orient-layer">
    <div class="mod-orient-layer__content"> <i class="icon mod-orient-layer__icon-orient"></i>
        <div class="mod-orient-layer__desc">为了更好的体验，请使用横屏浏览</div>
    </div>
</div>
<script src="js/jquery-1.11.2.min.js"></script>
<script src="js/swiper-3.4.2.min.js"></script>
<script src="js/swiper.animate.min.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>

    $(function(){
        //微信接口音乐
        function autoPlayAudio() {
            document.getElementById('music').play();
            document.addEventListener("WeixinJSBridgeReady", function () {
                document.getElementById('music').play();
            }, false);
        }
        autoPlayAudio();

        //鸡
        function chickFun(){
            var chickImg=document.createElement("img");
            chickImg.src=$(".chickimg img").attr("src");
            var chickDom=$("#chick");
            var w=chickDom[0].width=chickDom.width();
            var h=chickDom[0].height=chickDom.height();
            var chick= chickDom[0].getContext("2d");
            var x = 0;
            function drawChick(){
                chick.clearRect(0,0,w,h);
                chick.beginPath();
                chick.save();
                x+=310;
                if(x>=chickImg.width){
                    x = 0;
                }
                //9个参数
                //1元素节点
                //2切割的起始X坐标
                //3切割的起始的Y坐标
                //4切割宽度
                //5切割高度
                //6切割好的图片的定位X坐标
                //7切割好的图片的定位Y坐标
                //8显示切割图片的宽度
                //9显示切割图片的高度
                chick.drawImage(chickImg,x,0,310,224,0,0,w,h);
                chick.closePath();
                chick.stroke();
                chick.restore();
            }
            drawChick();
            setInterval(drawChick,150);
        }
        chickFun();

        var step=0;
        var startpos=parseFloat($("#chick").css("left"));
        function walk(){
            var all=parseFloat($(".progress").width());
            if(step<5){
                step++;
                var num=step;
                $("#chick").css("left",startpos+all/5*(step));
                $(".loading .progress .prowarp").width(all/5*(step));
                if(step<5){
                    setTimeout(function(){
                        var bull=$("<img class='bull' src='images/bull"+(num)+".png'/>");
                        bull.css("left",startpos+all/5*(num));
                        $(".loading").append(bull);
                    },1500);
                }
            }else{
                $(".wrap").addClass("con_warp");
                $("#music").attr("src",$("#music").data("src"));
                autoPlayAudio();
                clearInterval(walkTimer);
                var swiper01 = new Swiper('.swiper-container1', {
                    slidesPerView: 1,
                    loop:true,
                    autoplayDisableOnInteraction : false,
//                    autoplay:5000,
                    prevButton:'.swiper-button-prev',
                    nextButton:'.swiper-button-next',
                    onSlideChangeEnd: function (swiper) {
                        console.log(swiper.activeIndex)
                        if(swiper.activeIndex==6){
                            $(".banner1").addClass("banner1_bg");
                        }else{
                            $(".banner1").removeClass("banner1_bg");
                        }
                    },
                    onClick:function(swiper){
                        if(swiper.activeIndex!=6){
                            $(".banner_tips").removeClass("hidden");
                            $(".banner_tips>div>div>.info").addClass("hidden");
                            $(".banner_tips>div>div>.info:eq("+swiper.realIndex+")").removeClass("hidden");
                        }
                    }
                });
                var swiper02 = new Swiper('.swiper-container2', {
                    slidesPerView: 1,
                    loop:true,
                    autoplayDisableOnInteraction : false,
                    autoplay:5000,
                    noSwiping: true,
                    onInit: function (swiper) {
                        swiperAnimateCache(swiper);
                        swiperAnimate(swiper);
                    },
//                    onSlideChangeEnd: function (swiper) {
//                        if(swiper.activeIndex==1||swiper.activeIndex==3||swiper.activeIndex==10){
//                            $(".public .grasses").show();
//                        }else{
//                            $(".public .grasses").hide();
//                        }
//                    },
                    onTransitionEnd: function (swiper) {
                        swiperAnimate(swiper);
                    }
                });
            }
        }
        var walkTimer=setInterval(walk,1000);
        walk();

        //弹框的关闭
        $(".banner_close").click(function(){
            $(".banner_tips").addClass("hidden");
        });
    });
</script>
<script>
    (function (win,doc){
        if (!win.addEventListener) return;
        function screenOrientation(){
            setTimeout(function(){
            //        横屏
                var body=doc.getElementsByTagName('body')[0];
                var cw=win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth,
                        ch=win.innerHeight || doc.documentElement.clientHeight || doc.body.clientHeight;
                if(win.orientation){
                    if(window.orientation == 0 || window.orientation == 180) {
                        body.style.marginLeft=(cw-ch)/2+"px";
                        body.style.marginTop=(ch-cw)/2+"px";
                        body.style.width=ch+"px";
                        body.style.height=cw+"px";
                    }else {
                        body.style.width=cw+"px";
                        body.style.height=ch+"px";
                        body.style.marginLeft="0px";
                        body.style.marginTop="0px";
                    }
                }else{
                    if(cw>ch){
                        body.style.width=cw+"px";
                        body.style.height=ch+"px";
                        body.style.marginLeft="0px";
                        body.style.marginTop="0px";
                    }else{
                        body.style.marginLeft=(cw-ch)/2+"px";
                        body.style.marginTop=(ch-cw)/2+"px";
                        body.style.width=ch+"px";
                        body.style.height=cw+"px";
                    }
                }
            },200);
        };
        screenOrientation();
        doc.addEventListener('DOMContentLoaded',screenOrientation,false);
        win.addEventListener('resize',screenOrientation,false);
        win.addEventListener('load',screenOrientation,false);
    })(window,document);
</script>
</body>
</html>