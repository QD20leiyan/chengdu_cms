<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0"/>
    <title>全民枪战2_官方网站_ca，新一代的枪战选择</title>
    <meta name="keywords" content="陈赫，全民枪战，全民枪战官网，全民创造，全民创造官网，跑酷模式，英雄之路，大头模式，幽灵爆破，全民枪战激活码，全民枪战礼包，FPS手游，枪战手游，竞技手游，生化模式，人类的复仇，新一代的选择">
    <meta name="description" content="超人气电竞手游《全民枪战2.0》携“创造”模式火热上线!全新的创造模式下,玩家可以自由创作地图道具,在自己的作品里完虐职业高玩!枪战世界,全民创造!更有重磅奖金征集优秀地图创意!此外,还有全线升级的画面,酷炫的武器换肤,攻击特效!创造你的荣耀阵地!">
    <link rel="stylesheet" href="css/index.css"/>
    <script src="js/jquery-1.11.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.fittext.js" type="text/javascript"></script>
    <script src="js/index.js"></script>
    <script>
        //yxhy2017
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?f183afb4e7ff5b06386ab52608aecea5";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();

    </script>
    <script>
    	(function (doc, win) {
    		var docEl = doc.documentElement,
        	resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
       		recalc = function () {
            var clientWidth = docEl.clientWidth;
            if (!clientWidth) return;
            docEl.style.fontSize = 20 * (clientWidth /400) + 'px';
        };
		recalc();
   		if (!doc.addEventListener) return;
    		win.addEventListener(resizeEvt, recalc, false);
   			 doc.addEventListener('DOMContentLoaded', recalc, false);
		})(document, window);
    </script>
</head>
<body>
<div class="container">
    <div class="content">
        <img class="logo1" src="images/logo2.png" alt=""/>
        <img class="logo2" src="images/logo3.png" alt=""/>
        <!-- <img class="title" src="images/title.png" alt=""/> -->
        <img class="shuzhi" src="images/img1.png" alt=""/>
        <img class="deng swing" src="images/img2.png" alt=""/>
        <div class="board">
            <a href="http://downurl.yingxiong.com/url2/qmqz_jlb.html" class="d_btn"><img src="images/down.png" alt=""></a>
            <a class="new_c getGift" id="getGift" data-id="1" href="javascript:;"><img src="images/gift1.png" alt=""></a>
            <a class="vip_c getGift" data-id="2" href="javascript:;"><img src="images/gift2.png" alt=""></a>
        </div>
    <!-- 模态框1：领取礼包 -->
    <div class="modal">
        <div id="example1" >
            <div class="dialog">
                <div class="content">
                    <img src="images/border.png" alt="" class="bord"/>
                    <img src="images/people.png" alt="" class="man"/>
                    <img src="images/page.png" alt="" class="linq"/>
                    <a class="close"></a>
                    <div class="form">
                        <input type="number" onKeypress="return (/[\d]/.test(String.fromCharCode(event.keyCode)))" placeholder="输入手机号码" class="form-control1" id="phone" />
                        <input type="text" placeholder="验证码" class="form-control2" id="codeNem" name="phone" />
                        <button class="btn btn_send" type="button">发送</button>
                        <button class="btn btn_now">
                            立即领取
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- 模态框2：验证码已发送到手机 -->
        <div id="example2">
            <div class="dialog2">
                <div class="content2">
                    <div class="info info1">
                        <p>验证码已发送到手机</p>
                        <p>请注意查收短信</p>
                        <button class="btn btn_sure">确 定</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- 模态框3：礼包码-->
        <div id="example3" class="fade">
            <div class="dialog2">
                <div class="content3">
                    <div class="info info2">
                        <p style="font-size:1.2rem">您的礼包码是：</p>
                        <p class="codeNum">erterter</p>
                        <span class="copy">长按复制礼包码</span>
                        <button class="btn btn_3">确 定</button>
                        <p class="liuch">下载游戏-任务-兑换礼品-输入礼包码</p>
                        <p class="liuch liuch2">兑换哦~</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- 模态框4：已领过-->
        <div id="example4" class="">
            <div class="dialog2">
                <div class="content4">
                    <div class="info">
                        <p>您的手机号码</p>
                        <p>已经领取过礼包了！</p>
                        <button class="btn btn_4">确 定</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
<script type="text/javascript">
    //倒计时
    function page_djs(ele, callback) {
        var time = 60;
        if(ele) {
            ele.html("60s");
        }
        djs_timer = setInterval(function() {
            time--;
            ele.html((time<=0?0:time) + "s");
            if(time == 0) {
                clearInterval(djs_timer);
                ele.html("获取验证码");
                if(callback) {
                    callback();
                }
            }
        }, 1000);
    }
    $(".getGift").click(function () {
        var type= $(this).attr('data-id');
        $(".modal").show();
        //获取验证码
        $(".btn_send").unbind("click.a");
        $(".btn_send").bind("click.a",function () {
            var phone=$('#phone').val();
            var myreg=/^1[3|4|5|7|8|9]\d{9}$/;
            if(phone==''){
                alert("手机号码不能为空！");return
            }else if(phone.length!=11){
                alert("请输入有效的手机号码！");return
            }else if(!myreg.test(phone)){
                alert("请输入有效的手机号码！");return
            }
            var srf = $('meta[name="csrf-token"]').attr('content');
            $.ajax({
                type: "POST",//发GET请求，调用发送短信的API接口
                url: "/h5/ca/ajax-double-verify.html",
                data: {'phone': phone,'type':type,"_csrf_frontend":srf},
                success: function (data) {//请求成功后执行
                    // 1.存储接口返回的验证码
                    $('.btn_send').attr("disabled", true);
                    var data = JSON.parse(data);
                    if (data.status == 0) {
                        // 2.操作页面开始倒计时
                        $("#example2").show();
                        $('.btn_send').attr("disabled", false);
                        page_djs($(".btn_send"),function(){
                            $(".btn_send").attr("disabled", true);
                            $(".btn_send").html("发送");
                        });
                    }else if(data.status==101){
                        $('.btn_send').attr("disabled", false);
                        $('.info2').find('.codeNum').text(data.code);
                        $("#example3").show();
//                        $("#example4").show();

                    }else{
                        alert(data.msg)
                    }
                },
                error: function () {
                    alert("网络出现故障，请检查您的网络!");
                }
            });
        });
        //立即领取按钮
        $(".btn_now").unbind("click.b");
        $(".btn_now").bind("click.b",function () {
            var phone=$('#phone').val();
            var code=($("#codeNem").val());
            //这里验证用户填写的验证码，和调用接口时的返回值是否一致
            $.ajax({
                type: "GET",//发GET请求，调用领取礼包的API接口
                url: "/h5/ca/double.html",
                data: {'code': code,'phone':phone,'type':type},
                success: function (data) {
                    var data = JSON.parse(data);
                    if(data.status==0) {
                        $('.info2').find('.codeNum').text(data.code);
                        $("#example3").show();
                    }else if(data.status==101){
                        $('.info2').find('.codeNum').text(data.code);
                        $("#example3").show();
                    }else{
                        alert(data.msg);
                    }
                },
                error: function () {
                    alert("网络出现故障，请检查您的网络!");
                }
            });
        });
    });
    //模态框1中的关闭按钮
    $(".close").click(function () {
        $(".modal").hide();
        $('#phone').val("");
        $('#codeNem').val("");
        clearInterval(djs_timer);
        $(".btn_send").html("发送");
    });
    //模态框2中的确认按钮
    $(".btn_sure").click(function () {
        $("#example2").hide();
    });
    //模态框3中的确认按钮
    $(".btn_3").click(function () {
        $("#example3").hide();
        $(".modal").hide();
        $('#phone').val("");
        $('#codeNem').val("");
        clearInterval(djs_timer);
        $(".btn_send").html("发送");
    });
    //模态框4中的确认按钮
    $(".btn_4").click(function () {
        $("#example4").hide();
        $('#phone').val("");
        $('#codeNem').val("");
        clearInterval(djs_timer);
        $(".btn_send").html("发送");
    });
</script>

</html>