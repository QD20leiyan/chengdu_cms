<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>创造与魔法-劳动节节</title>
		<meta name="viewport" content=" initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="css/swiper-3.4.0.min.css" />
		<link rel="stylesheet" href="css/style.css" />
		<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
		<script>
			(function(doc, win) {
				var docEl = doc.documentElement,
					// 手机旋转事件,大部分手机浏览器都支持 onorientationchange 如果不支持，可以使用原始的 resize
					resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
					recalc = function() {
						//clientWidth: 获取对象可见内容的宽度，不包括滚动条，不包括边框
						var clientWidth = docEl.clientWidth;
						if(!clientWidth) return;
						docEl.style.fontSize = 16 * (clientWidth / 320) + 'px';
					};

				recalc();
				//判断是否支持监听事件 ，不支持则停止
				if(!doc.addEventListener) return;
				//注册翻转事件
				win.addEventListener(resizeEvt, recalc, false);
			})(document, window);
		</script>
	</head>

	<body>
		<div class="tips">长按保存图片分享好友</div>
		<div class="page1">
			<div class="from">
				<div class="sex">
					<p class="active" data-index="1"><i></i><span>我是男生</span></p>
					<p data-index="2"><i></i><span>我是女生</span></p>
				</div>
				<input type="text" maxlength="15">
			</div>
			<div class="start"></div>
			<div class="pig"></div>
		</div>
		<div class="pageHide">
			<div class="page2">
				<img class="bgImage" src="images/bg2.jpg" alt="">
				<div class="word">
					<h4>贺杰啊</h4>
					<p>减肥没有那么容易</p>
					<p>每块脂肪都有他的脾气</p>
				</div>
				<div class="label">我是gay</div>
				<div class="code"></div>
			</div>
			<img class="myImg" src="" alt="">
			<div class="page3">
				<a class="js_wap_down">
					<div class="open"></div>
				</a>
				<div class="slogan"></div>
				<div class="video">
					<img src="images/video_play.png" alt="">
				</div>
				<div class="swiper-container" id="swiper2">
					<div class="swiper-wrapper">
						<div class="swiper-slide"><img src="images/1.jpg"></div>
						<div class="swiper-slide"><img src="images/2.jpg"></div>
						<div class="swiper-slide"><img src="images/3.jpg"></div>
						<div class="swiper-slide"><img src="images/4.jpg"></div>
						<div class="swiper-slide"><img src="images/5.jpg"></div>
					</div>
					<div class="shadowLeft"></div>
					<div class="shadowRight"></div>
				</div>
			</div>
		</div>
		<!--遮罩层-->
		<div id=loading10 style="display:none;position:fixed;left:0;top:0;z-index:999;background:rgba(0,0,0,1);width:100%;height:100%" class="js_load">
			<div style="width: 100px;height: 56px;position: absolute;left: 50%;top: 50%;margin: -28px -50px">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODJDNTVGNjA0NDUxMTFFN0FEQzZFNUIwQkM3NUZFMjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODJDNTVGNjE0NDUxMTFFN0FEQzZFNUIwQkM3NUZFMjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MkM1NUY1RTQ0NTExMUU3QURDNkU1QjBCQzc1RkUyNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4MkM1NUY1RjQ0NTExMUU3QURDNkU1QjBCQzc1RkUyNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp8wa4IAAATlSURBVHja3FptiFRlFL7jzmzmJxu1KbvqoraGOOsuteZHioYf4EJmP6RAKvwjuEUgBIE/lP1V/Spig36U4gf9EgujMj8Q8TMoN2stc7VNbKxGW3drxZ0ZdzrHfS4cju+9c987c0emAw9z73vvPe855z3v+XiZWD6fdyqZYlqBzs7OihC8vb397u8op8IpHiHvBsJiXB8n/BrFJFGtAPNdRngQWBrVXGGZ1hDmEGo9no8hJMR9AmMmqgWvmnK50MOENYQqAkeAA4QrIQ0xlbCKgwnhDuEzwvWoV6ABwjuYeJG4t6EqfBsT9w3lcKEb6n48IRmCTxLf+vGORAGOJmk11uLj4157pEWNpcNEqrCb+IS65006z+L7eWqTm3hGqsBfhB411iiiUtbwTVZEnUb1rAc8S6oAR5tWwnSP52cIOTXWjN8hQkqMpzAm33EpB173lDmYuxWyWIVRjsnPCQXZOieVlQYJXYQnPfh9RZgpLOw1Zxd46dywUKzoXMJeQl9QBerV6tRCoR5Yy53we0IdYTIhQzirLPuzgfdZ8KsmXAMPl8YSnhKKS0+ps1HgDySpmBpnxtNgtXNIPvsJEwm3PHxfEwu9B5FoAPNwDmiCeyUM3/A7f9rsgTQy7IDhWQJ+2SbG+gMKLzd0PwRjWg2eJuEHIEvatpS4gs2X9LDMJFi+v8h6bCJc0KQkr/QPhmARuBbKwWcvIHbL8JeB2xRLt8CrWoz9QvgmCP+4xSRHCeexGnEoli2BAlm4SAsM1mWTE+KWbSQz/jqCsv4aUJJyOm4osqS1/o24S0z4BBeef9hPgbWEHYQJPhMcJDxLuF1iwavQG9T7vJOBK/d6hdH3CgjPtILwSgSWbywgvION/nQpirlcBArkw7ynFXjdI3lpF9odgQIXCVcLvJPRZbfeA/tQGtR7rM6Abc9qQVyWfEEYrXKCtPxgoU3sukfvfTyrum0TIGyPFp8gbELV+C7hNA+6x3y2JObiAnGJcBFPV9JzBc3EjxLeJKwTFWozFBos0uLsLi/CdZgeR4l9mPBPsaUEM91IeBVWlzQBil0uUoHxQni3E2PjzHZGjiRP+ZUsfgosJ3T4nNWcdk8RTG6nl9rHNf8m/AY30ivzDJT5ElEqcD/AH233EJ5d5m0su9v0TLU8VnkAqxcDj12EI9gDmh7CXHU2K9BqOG3L4+ivAx2ba6X3sRe4RtpM+K6AxR/jBXJGDn0vIvuzixxDJcqZfo7qBtnQUwi/B12BY8rvvkX9s0kIz/QShGcap0qMagizQsX1NgjvKrNS5Rlu3j9SkYhzxCWbFbiAidrQA3xuSPXcmL+sxobE9Vb0uUxLCVtEnJe0CqHzphi7CiVmw9V+CtNS/gh40WvCkq6L7RRtYpN41iTazwPYYzGxH54nfGxw2W4geCILmHiSmFD6Ka/SNlw/YhBog7Aiu9oCJew7bki2SYxhqlEW+g0lPLecH1jw+FS5G/N6wXCME4kCy+CbkrZbnm3eRGyXNM2598Q6EgVmqfsUDqps6ZChsp1SDgVkwhlGUsuEPI34RES3nJtDim3qCxGH2PWE+Si6uouogzjKvUWYgVCZKocCDqKFXxHXh3g/WsT+Po93e4vpP2Kl/q+ECLULUDJwFv3QGTmeD907lHoFgtApIFKK/e/+rVJp9J8AAwCOzjQoqkUfeAAAAABJRU5ErkJggg==" alt="" style="width:36px;height:36px;-webkit-animation:dialogLoading 1s linear infinite;animation:dialogLoading 1s linear infinite;display: block;margin: 0 auto;margin-bottom: 2px;">
				<p style="width: 100%;height: 20px;text-align: center;font-size: 15px;color: #000;line-height: 20px;color: #fff">正在加载...</p>
			</div>
		</div>
	</body>
	<!--<script src="https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.js"></script>-->
	<script src="js/html2canvas.js"></script>
	<script src="js/swiper-3.4.0.min.js"></script>
	<script type="text/javascript">
		$(function() {
            var mySwiper = new Swiper(".swiper-container", {
                effect: 'coverflow',
                slidesPerView: 2,
                initialSlide: 1,
                centeredSlides: true,
                paginationClickable: true,
                autoplayDisableOnInteraction: false,
                observer:true,
                observeParents:true,
                // autoplay:3000,
                loop: true,
                coverflow: {
                    rotate: 60,
                    stretch: 0,
                    depth: 300,
                    modifier: 1,
                    slideShadows: true
                }
            })
			$('.pageHide').hide();
			$('.sex').find('p').click(function () {
				$('.sex').find('p').removeClass();
				$(this).addClass('active');
			})
            $('.start').click(function () {
                var name = $('.from').find('input').val();
				var sex = $('.sex').find('p.active').attr('data-index');
                var params = {
                    name: name,
					sex: sex
				};
                if(name){
                    // $.post('/h5/sm/five-ac.html', params, function(){
                    //
                    // });
                    $('.page1').hide();
                    $('.pageHide').show();
                    $('.tips').show();
				}else{
                    alert('请输入您的名字');
				}
            })
			$('.open').click(function () {
                $.post('/h5/sm/click.html', {}, function(){

                });
            })
			$(window).scroll(function () {
				var scroll = $(this).scrollTop();
				if (scroll <= 0 && $('.pageHide').css('display') == 'block') {
                    $('.tips').show();
				}else{
                    $('.tips').hide();
				}
			})
            //手指放下，抬起时间
            $(".page2").on("touchstart", function(e) {
                // s_time = parseInt(e.timeStamp);
                $('.myImg').css('zIndex',9);
            });
            $(".page2").on("touchend", function(e) {
                $('.myImg').css('zIndex',0);
            });
            function getImage() {
                var canvas2 = document.createElement("canvas");
                var _canvas = document.querySelector('.page2');
                var w = parseInt(window.getComputedStyle(_canvas).width);
                var h = parseInt(window.getComputedStyle(_canvas).height);
                canvas2.width = w * 2;
                canvas2.height = h * 2;
                canvas2.style.width = w + "px";
                canvas2.style.height = h + "px";
                var context = canvas2.getContext("2d");
                context.scale(2,2);
                html2canvas(document.querySelector('.page2'),
                    {canvas:canvas2}).then(function(canvas) {
                    $(".myImg").attr("src",canvas.toDataURL("data:image/png")).css('display','block')
                });
            }
            // getImage();
        });
	</script>
	<!--微信分享-->
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script>
        document.write('<script src="http://game.yingxiong.com/common/cawx/cawxjs.php?url='
            +encodeURIComponent(location.href)+'"><\/script>');
	</script>
	<script>
        $(function(){
            // initForm();
            var share = {
                imgUrl      : 'http://cdnstatic.yingxiong.com/czymf/h5/yrj/images/icon.jpg',
                shareTitle  : '愚人节——反愚人联盟',
                descContent : '为了这个保证，我愿上刀山下火海......',
                lineLink    : 'http://game.yingxiong.com/h5/sm/bzs.html'
            };
            wx.config({
                debug     : false,
                appId     : wx_conf.appId,
                timestamp : wx_conf.timestamp,
                nonceStr  : wx_conf.nonceStr,
                signature : wx_conf.signature,
                jsApiList : [
                    'onMenuShareTimeline',
                    'onMenuShareAppMessage',
                    'chooseImage',
                    'previewImage',
                    'uploadImage',
                    'downloadImage'
                ]
            });
            wx.ready(function(){
                wx.onMenuShareAppMessage({
                    title   : share.shareTitle,
                    desc    : share.descContent,
                    link    : share.lineLink,
                    imgUrl  : share.imgUrl,
                    success : function() {
                        $.ajax({
                            'url':gift_url,
                            'data':{"cms_csrf":srf},
                            'type':'POST',
                            'dataType':'Json',
                            success:function(data){
                                $.get('http://game.yingxiong.com/h5/sm/ajax-bzs-share.html', {}, function(){

                                });
                            }
                        });
                    }
                });
                wx.onMenuShareTimeline({
                    title   : share.shareTitle,
                    desc    : share.descContent,
                    link    : share.lineLink,
                    imgUrl  : share.imgUrl,
                    success : function() {
                        $.get('http://game.yingxiong.com/h5/sm/ajax-bzs-share.html', {}, function(){

                        });
                    }
                });

                wx.onMenuShareQQ({
                    title: share.shareTitle,
                    desc: share.descContent,
                    link: share.lineLink,
                    imgUrl: share.imgUrl,
                    success : function() {
                        $.get('http://game.yingxiong.com/h5/sm/ajax-bzs-share.html', {}, function(){

                        });
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
            })
        });
	</script>

</html>