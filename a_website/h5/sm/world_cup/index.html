<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>100分不怕你骄傲</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content=" initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no">
    <meta name="full-screen" content="yes" />
    <meta name="x5-fullscreen" content="true" />
    <link href="css/animate.min.css" rel="stylesheet" />
    <link href="css/swiper.min.css" rel="stylesheet" />
    <link href="css/index.css" rel="stylesheet" />
    <script>
        (function (doc, win) {
            var docEl = doc.documentElement,
            // 手机旋转事件,大部分手机浏览器都支持 onorientationchange 如果不支持，可以使用原始的 resize
                    resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                    recalc = function () {
                        //clientWidth: 获取对象可见内容的宽度，不包括滚动条，不包括边框
                        var clientWidth = docEl.clientWidth;
                        if (!clientWidth) return;
                        docEl.style.fontSize = 16*(clientWidth / 320) + 'px';
                    };

            recalc();
            //判断是否支持监听事件 ，不支持则停止
            if (!doc.addEventListener) return;
            //注册翻转事件
            win.addEventListener(resizeEvt, recalc, false);
        })(document, window);
    </script>
</head>
<style>
    .page4{
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #CACACA;
    }
    .page4_con{
    width: 18.71875rem;
    height: 30.09375rem;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -15.046875rem;
    margin-left: -9.359375rem;
    background: url(images/hb.jpg) no-repeat;
    background-size: 100% 100%;
    }
    .page4 .content_box {
    overflow: inherit!important;
    width: 17.75rem;
    margin: 0 auto;
    padding-top: 1%;
}
.page4 .content_box .type_info{
    margin-top: 5rem;
    padding: 0 1.5rem;
    color: #000;
    font-size: 1.28125rem;
    font-weight: bolder;
    padding-left: 2.2rem;
}
.page4 .content_box .type_info .type{
    color: #fe0000;
}
.page4 .content_box .txt{
    font-size: 1.3rem;
    color: #000;
    font-weight: bold;
    padding: 0 0 0 2.2rem;
    margin-top: 1.5rem;
}
.page4 .content_box .txt span{
    color: #fe0000;
    font-size: 1.9rem;
}
.page4 .qrcode{
    position: absolute;
    right: 20%;
    bottom: 17%;
    width: 3.2rem;
    height: 3.2rem;
    margin-left: -2.40625rem;
}
.page4 .qrcode img{
    width: 3.2rem;
    height: 3.2rem;
}
.page4 .shumin{
    width: 16.75rem;
    margin: 0 auto;
    position: relative;
    margin-top: 3rem;
}
.page4 .shumin p{
    text-align:right; 
    display: block;
    margin: 0 auto;
    font-size: 0.83375rem;
    line-height: 1.7rem;
    padding-right: 1rem;
}
.page4 .shumin p span{
    padding-left: 3px;
}
</style>
<body>
<div class="wrap">
    <section class="page1">
                <div class="logo animated bounce"></div>
                <div class="content_box">
                    <p><span class="title title1"></span><input type="text" placeholder="输入或选择赌注" class="duzhu_input" value="" maxlength="7"><a href="javascript:;" class="duzhu"></a></p>
                    <p><span class="title title2"></span><input type="text" placeholder="请选择队伍" class="sel_input" readonly="readonly" value="" class="term_btn"><a href="javascript:;" class="sel_term" ></a></p>
                    <div class="name_box">
                        <div class="peo"></div>
                        <div class="xkl animated fadeInRight"></div>
                        <div class="name_input">
                            <p><i></i><input type="text" placeholder="在这签下你的大名" class="name_val"></p>
                        </div>
                    </div>
                </div>
                <div class="btn_box">
                    <p class="repeat">
                    <a href="javascript:;"></a>
                    <span class="footboal animated bounceInLeft"></span>
                    </p>
                    <p class="over"><a href="javascript:;"></a></p>
                </div>
    </section>
    <section class="tips">
                <div class="tip1">
                    <a href="javascript:;" class="close"></a>
                    <ul>
                        <li>10包辣条</li>
                        <li>5瓶青岛</li>
                        <li>13斤花生米</li>
                    </ul>
                </div>
                <div class="tip2">
                    <a href="javascript:;" class="close"></a>
                        <ul>
                        <li>俄罗斯</li>
                        <li>沙特</li>
                        <li>乌拉圭</li>
                        <li>葡萄牙</li>
                        <li>西班牙</li>
                        <li>乌拉圭</li>
                        <li>葡萄牙</li>
                        <li>西班牙</li>
                        <li>乌拉圭</li>
                        <li>葡萄牙</li>
                        <li>西班牙</li>
                    </ul>
                </div>
    </section>
</div>
        <section class="page4">
            <div class="page4_con">
                <div class="content_box">
                    <p class="type_info">我赌&nbsp;<i class="type">10包辣条</i>：</p>
                    <p class="txt">2018世界杯<br>冠军属于&nbsp;<span>俄罗斯&nbsp;</span>!</p>
                </div>
                <div class="shumin">   
                    <p class="qianmin">签名：<span id="name">二狗</span></p>
                    <p class="stu_num">创魔足球班&nbsp;学号<span id="num">01</span></p>
                </div>
                <p class="qrcode"><img src="images/qrcode.png" alt=""/></p>
            </div>
        </section>
            <section class="page5 hidden">
                <p class="save"></p>
                <img src="images/hb.jpg" alt="" class="jp_img"/>
                <div class="favorate"><a href=""></a></div>
            </section>
<!--遮罩层-->
<div id=loading10 style="display:none;position:fixed;left:0;top:0;z-index:999;background:rgba(0,0,0,1);width:100%;height:100%" class="js_load">
    <div style="width: 100px;height: 56px;position: absolute;left: 50%;top: 50%;margin: -28px -50px">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODJDNTVGNjA0NDUxMTFFN0FEQzZFNUIwQkM3NUZFMjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODJDNTVGNjE0NDUxMTFFN0FEQzZFNUIwQkM3NUZFMjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MkM1NUY1RTQ0NTExMUU3QURDNkU1QjBCQzc1RkUyNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4MkM1NUY1RjQ0NTExMUU3QURDNkU1QjBCQzc1RkUyNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp8wa4IAAATlSURBVHja3FptiFRlFL7jzmzmJxu1KbvqoraGOOsuteZHioYf4EJmP6RAKvwjuEUgBIE/lP1V/Spig36U4gf9EgujMj8Q8TMoN2stc7VNbKxGW3drxZ0ZdzrHfS4cju+9c987c0emAw9z73vvPe855z3v+XiZWD6fdyqZYlqBzs7OihC8vb397u8op8IpHiHvBsJiXB8n/BrFJFGtAPNdRngQWBrVXGGZ1hDmEGo9no8hJMR9AmMmqgWvmnK50MOENYQqAkeAA4QrIQ0xlbCKgwnhDuEzwvWoV6ABwjuYeJG4t6EqfBsT9w3lcKEb6n48IRmCTxLf+vGORAGOJmk11uLj4157pEWNpcNEqrCb+IS65006z+L7eWqTm3hGqsBfhB411iiiUtbwTVZEnUb1rAc8S6oAR5tWwnSP52cIOTXWjN8hQkqMpzAm33EpB173lDmYuxWyWIVRjsnPCQXZOieVlQYJXYQnPfh9RZgpLOw1Zxd46dywUKzoXMJeQl9QBerV6tRCoR5Yy53we0IdYTIhQzirLPuzgfdZ8KsmXAMPl8YSnhKKS0+ps1HgDySpmBpnxtNgtXNIPvsJEwm3PHxfEwu9B5FoAPNwDmiCeyUM3/A7f9rsgTQy7IDhWQJ+2SbG+gMKLzd0PwRjWg2eJuEHIEvatpS4gs2X9LDMJFi+v8h6bCJc0KQkr/QPhmARuBbKwWcvIHbL8JeB2xRLt8CrWoz9QvgmCP+4xSRHCeexGnEoli2BAlm4SAsM1mWTE+KWbSQz/jqCsv4aUJJyOm4osqS1/o24S0z4BBeef9hPgbWEHYQJPhMcJDxLuF1iwavQG9T7vJOBK/d6hdH3CgjPtILwSgSWbywgvION/nQpirlcBArkw7ynFXjdI3lpF9odgQIXCVcLvJPRZbfeA/tQGtR7rM6Abc9qQVyWfEEYrXKCtPxgoU3sukfvfTyrum0TIGyPFp8gbELV+C7hNA+6x3y2JObiAnGJcBFPV9JzBc3EjxLeJKwTFWozFBos0uLsLi/CdZgeR4l9mPBPsaUEM91IeBVWlzQBil0uUoHxQni3E2PjzHZGjiRP+ZUsfgosJ3T4nNWcdk8RTG6nl9rHNf8m/AY30ivzDJT5ElEqcD/AH233EJ5d5m0su9v0TLU8VnkAqxcDj12EI9gDmh7CXHU2K9BqOG3L4+ivAx2ba6X3sRe4RtpM+K6AxR/jBXJGDn0vIvuzixxDJcqZfo7qBtnQUwi/B12BY8rvvkX9s0kIz/QShGcap0qMagizQsX1NgjvKrNS5Rlu3j9SkYhzxCWbFbiAidrQA3xuSPXcmL+sxobE9Vb0uUxLCVtEnJe0CqHzphi7CiVmw9V+CtNS/gh40WvCkq6L7RRtYpN41iTazwPYYzGxH54nfGxw2W4geCILmHiSmFD6Ka/SNlw/YhBog7Aiu9oCJew7bki2SYxhqlEW+g0lPLecH1jw+FS5G/N6wXCME4kCy+CbkrZbnm3eRGyXNM2598Q6EgVmqfsUDqps6ZChsp1SDgVkwhlGUsuEPI34RES3nJtDim3qCxGH2PWE+Si6uouogzjKvUWYgVCZKocCDqKFXxHXh3g/WsT+Po93e4vpP2Kl/q+ECLULUDJwFv3QGTmeD907lHoFgtApIFKK/e/+rVJp9J8AAwCOzjQoqkUfeAAAAABJRU5ErkJggg==" alt="" style="width:36px;height:36px;-webkit-animation:dialogLoading 1s linear infinite;animation:dialogLoading 1s linear infinite;display: block;margin: 0 auto;margin-bottom: 2px;">
        <p style="width: 100%;height: 20px;text-align: center;font-size: 15px;color: #000;line-height: 20px;color: #fff">正在加载...</p>
    </div>
</div>
</body>
<script src="js/jquery-1.11.2.min.js"></script>
<script src="https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.js"></script>
<script type="text/javascript">
    var duzhu_val='';
    var sel_val='';
    var name_val='';
    var h5_id="";
    var sure_url="{myurl name='commonMethod/ajax-save-data'}";
    var srf = $('meta[name="csrf-token"]').attr('content');
    $(function() {
        h5_id=$(".h5_id").val();
        console.log(h5_id);
        //选择按钮
        $(".page1 .duzhu").click(function(){
            $(".tips").fadeIn(500);
            $(".tips .tip1").fadeIn(500);
        });
        //赌注选择
        $(".tips .tip1 ul li").click(function(){
            var text=$(this).text();
            $(".tips").fadeOut(500);
            $(".tips .tip1").fadeOut(500);
            $(this).addClass("active").siblings().removeClass("active");
            $(".duzhu_input").val(text);
        });
        //选择按钮
        $(".page1 .sel_term,.page1 .sel_input").click(function(){
            $(".tips").fadeIn(500);
            $(".tips .tip2").fadeIn(500);
        });
        //弹窗关闭按钮
        $(".tips .close").click(function(){
            $(".tips").fadeOut(500);
            $(".tips .tip1").fadeOut(500);
        });
        //球队选择
        $(".tips .tip2 ul li").click(function(){
            var text=$(this).text();
            $(".tips").fadeOut(500);
            $(".tips .tip2").fadeOut(500);
            $(this).addClass("active").siblings().removeClass("active");
            $(".sel_input").val(text);
        });
        //点击完成确认截屏
        $("p.over a").click(function(){
            var duzhu_val=$(".duzhu_input").val();
            var sel_val=$(".sel_input").val();
            var name_val=$(".name_val").val();
            data_arr.push(duzhu_val);
            data_arr.push(sel_val);
            if(duzhu_val==""){
                alert("请选择一个赌注哦~")
                return;
            }
            if(sel_val==""){
                alert("请选择一个队伍哦~")
                return;
            }
            if(name_val==""){
                alert("请签下你的大名~")
                return;
            }
            console.log(data_arr);
            // $.post(sure_url,{"user_name":name_val,"h5_id":2,"data":data_arr,"is_repeat":"","_csrf_frontend":srf},function(data){
            //    if(data.status == 0){
                    $(".js_load").show();
                    $(".wrap").addClass("hidden");
                    $(".page5").removeClass("hidden");
                    $(".page4 .type_info i.type").text(duzhu_val);
                    $(".page4 .txt span").text(sel_val);
                    $(".page4 .qianmin #name").text(name_val);
                    var canvas2 = document.createElement("canvas");
                    let _canvas = document.querySelector('.page4');
                    var w = parseInt(window.getComputedStyle(_canvas).width);
                    var h = parseInt(window.getComputedStyle(_canvas).height);
                    canvas2.width = w * 2;
                    canvas2.height = h * 2;
                    canvas2.style.width = w + "px";
                    canvas2.style.height = h + "px";
                    var context = canvas2.getContext("2d");
                    context.scale(2,2);
                    html2canvas(_canvas,{canvas:canvas2}).then(function(canvas) {
                        console.log(canvas.toDataURL());
                        $(".js_load").hide();
                        $(".jp_img").attr("src",canvas.toDataURL());
                        $(".page4").addClass("hidden");
                        $(".page5").removeClass("hidden");
                    });
             //    }else{
             //            alert(data.msg);
             //         }
             // });
        });
        var num=Math.ceil(Math.random()*32);
        var stu_num="";
        function pad(num, n) {
          var len = num.toString().length;
          while(len < n) {
            num = "0" + num;
            len++;
          }
          return num;
        }
        stu_num=pad(num,2);
        $("#num").html(stu_num);
        //测测其他
        $(".repeat a").click(function(){
             location.reload();
        });
    });
</script>
</html>