function GbgMusic(c,b,a){return new _GbgMusic(c,b,a)}function _GbgMusic(c,b,a){this.src=c;this.top=b;this.right=a;this.audio=null;this.musicBtn=null;this.hasStop=false;this.init()}_GbgMusic.prototype.init=function(){var a=this.musicBtn=document.createElement("div"),d=this.audio=document.createElement("audio"),e=document.createElement("style");e.innerText=".GmusicBtn{width: 70px;height: 70px;overflow: hidden;position: absolute;background-size: 100%;top:"+(this.top?this.top:35)+"px;right:"+(this.right?this.right:25)+"px;z-index: 1000;}@-webkit-keyframes Grotate{0%{-webkit-transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);}}.Grotate{-webkit-animation:Grotate 5s linear infinite;}";var b=document.getElementsByTagName("body")[0];var f=document.createDocumentFragment();f.appendChild(e);f.appendChild(a);f.appendChild(d);b.appendChild(f);a.className="GmusicBtn Grotate";d.src=this.src;d.setAttribute("loop","loop");d.setAttribute("autoplay","autoplay");var c=this;b.addEventListener("touchstart",function(){if(!c.hasStop){c.musicPlay()}b.removeEventListener("touchstart",arguments.callee)},false);a.addEventListener("touchstart",function(g){console.log("touchstart");g.stopPropagation();if(!d.paused){c.musicPause()}else{c.musicPlay()}},false)};_GbgMusic.prototype.musicPlay=function(){var b=this.audio,a=this.musicBtn;if(b.paused){a.style.backgroundPosition="0px 0px";a.className="GmusicBtn Grotate";b.play()}};_GbgMusic.prototype.musicPause=function(){var b=this.audio,a=this.musicBtn;if(!b.paused){this.hasStop=true;a.style.backgroundPosition="0px -70px";a.className="GmusicBtn";b.pause()}};_GbgMusic.prototype.stopAuto=function(){var b=this.audio,a=this.musicBtn;this.hasStop=true;b.removeAttribute("autoplay","autoplay");a.style.backgroundPosition="0px -80px";a.className="GmusicBtn";b.pause()};_GbgMusic.prototype.play=function(){this.musicPlay()};_GbgMusic.prototype.pause=function(){this.musicPause()};_GbgMusic.prototype.getAudio=function(){return this.audio};