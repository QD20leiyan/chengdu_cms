<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>极无双周年庆</title>
    <script src="js/setPageRem.js"></script>
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
<div class="swiper-container">
    <span class="play-btn on">
        <img src="img/p_music_03.png" alt="">
        <img class="Music-ani" src="img/p_music_play_06.png" alt="">
    </span>
    <div class="play-bg"></div>
    <audio autoplay class="play" loop>
        <source src="css/mp3.mp3">
    </audio>
    <div class="swiper-wrapper">
        <div class="swiper-slide slide1">
            <img src="img/bg1.jpg" alt="" class="kv-img">
            <img src="img/slogan.png" alt="" class="slogan animated bounceInDown">
            <img class="down-img down-ani" src="img/down.png" alt="">
        </div>
        <div class="swiper-slide slide2">
            <p>《极无双》于2016年11月10日</p>
            <p>全平台上线，至今已有<em class="days">371</em>天</p>
            <div class="cont-box">
                <div><span class="numFont days">0</span><em>Day</em></div>
                <div><span class="numFont hours">0</span><em>Hours</em></div>
                <div><span class="numFont minutes">0</span><em>Minutes</em></div>
                <div><span class="numFont seconds">0</span><em>Second</em></div>
            </div>
            <!--<img class="img-guang" src="img/img_guang.png" alt="">-->
            <img class="img1 rotate-ani" src="img/img1.png" alt="">
            <img class="down-img down-ani" src="img/down.png" alt="">
        </div>
        <div class="swiper-slide slide3">
            <p>期间，更新重大版本<em>12</em>次</p>
            <p>共推出<em>34</em>个武将</p>
            <p>制作了<em>39</em>个icon与</p>
            <p><em>436</em>张kv、banner、商店图…</p>
            <div class="cont-box">
                <div><em class="numFont">12</em><span>版本更新</span></div>
                <div><em class="numFont">34</em><span>武将</span></div>
                <div><em class="numFont">39</em><span>icon</span></div>
                <div><em class="numFont">436</em><span>kv</span></div>
            </div>
            <img class="down-img down-ani" src="img/down.png" alt="">
        </div>
        <div class="swiper-slide slide4">
            <p>在这一年的时间里</p>
            <p>游戏中共开放了<em>502</em>组服务器</p>
            <p>至今已有<em class="dynamicNum">0</em>个主公</p>
            <p>卷入乱世之中…</p>
            <div class="cont-box">
                <img src="img/img55.png" alt="">
            </div>
            <img class="down-img down-ani" src="img/down.png" alt="">
        </div>
        <div class="swiper-slide slide5">
            <p>主公们在三国乱世中</p>
            <p>共完成了<em class="dynamicNum">0</em>次副本，</p>
            <p>进行了<em>51,026,339</em>场军团战</p>
            <p>携手击败了<em>42,786,541</em>个boss…</p>
            <div class="cont-box">
                <img src="img/img8.png" alt="">
            </div>
            <img class="down-img down-ani" src="img/down.png" alt="">
        </div>
        <div class="swiper-slide slide6">
            <p>每一场战役都值得欢呼</p>
            <p>每一个版本都凝聚了我们的心血</p>
            <p>每一位主公我们都<em>认真对待！</em></p>
            <div class="cont-box">
                <img src="img/img9.png" alt="">
            </div>
            <img class="down-img down-ani" src="img/down.png" alt="">
        </div>
        <div class="swiper-slide slide7">
            <p>在这一年里</p>
            <p>我们的团队<em>日夜奋战</em></p>
            <p>只为把最好的《极无双》</p>
            <p>献给大家</p>
            <div class="cont-box slide7-cont">
                <video controls src="http://video.yingxiong.com/hd/7fd9d046255d46aa93c5c3cc7225b1db.mp4"></video>
            </div>
            <img class="down-img down-ani" src="img/down.png" alt="">
        </div>
        <div class="swiper-slide slide8">
            <p>同时</p>
            <p>《极无双》能实现今天的成绩</p>
            <p>更是离不开各个渠道的<em>大力支持</em></p>
            <div class="cont-box">
                <div class="icon-scroll">
                    <div class="icon-box">
                        <img src="img/icon1.png" alt="">
                        <img src="img/icon2.png" alt="">
                        <img src="img/icon3.png" alt="">
                        <img src="img/icon4.png" alt="">
                        <img src="img/icon5.png" alt="">
                        <img src="img/icon6.png" alt="">
                        <img src="img/icon7.png" alt="">
                        <img src="img/icon8.png" alt="">
                        <img src="img/icon9.png" alt="">
                        <img src="img/icon10.png" alt="">
                        <img src="img/icon11.png" alt="">
                        <img src="img/icon12.png" alt="">
                        <img src="img/icon13.png" alt="">
                        <img src="img/icon14.png" alt="">
                    </div>
                </div>
            </div>
            <img class="down-img down-ani" src="img/down.png" alt="">
        </div>

        <div class="swiper-slide slide9">
            <img class="kv-img" src="img/bg3.jpg" alt="">
            <p>让我们携手共进</p>
            <p>书写《极无双》辉煌新篇章！</p>
            <a class="share-btn"><img src="img/btn.png" alt=""></a>
            <a href="http://jws.yingxiong.com/" class="link-btn">了解周年庆活动</a>
        </div>
    </div>
</div>
<img class="share-bg" src="img/share_bg.png" alt="">
<!--<div class="video-box">-->
    <!--<video controls src="http://video.yingxiong.com/hd/7fd9d046255d46aa93c5c3cc7225b1db.mp4"></video>-->
<!--</div>-->
</body>
<script src="js/jquery-1.11.2.min.js"></script>
<script src="js/swiper.min.js"></script>
<script src="js/swiper.animate1.0.2.min.js"></script>
<script src="js/animatingNumber.js"></script>
<script>
    var iconScroll = $('.icon-scroll');
    var is_scroll = true;
    var scrollTop = 0;
    var scrollFu;
    var cloneImg = $('.clone-img');
    var boxH, iconH;
    var swiper = new Swiper('.swiper-container', {
        direction: 'vertical',
        lazyLoading: true,
        lazyLoadingInPrevNext: true,
        onSlideChangeEnd: function (swiper) {
            //alert(swiper.activeIndex) //切换结束时，告诉我现在是第几个slide
            var index = swiper.activeIndex;

            if (index == 3) {
                if ($('.slide4').find('.dynamicNum').text() == 0) {
                    //仅第一次加载动画
                    $('.slide4').find('.dynamicNum').animatingNumber({
                        from: 0,
                        to: 9432997,
                        duration: 1500
                    });
                    //执行完动画后继续加一
                    setTimeout(function () {
                        var num = 9432997
                        setInterval(function () {
                            num++
                            $('.slide4').find('.dynamicNum').text(num)
                        }, 800)
                    }, 1500)
                } else {
                    //第二次后继续加一
                    var num = parseInt($('.slide4').find('.dynamicNum').text())
                    setInterval(function () {
                        num++
                        $('.slide4').find('.dynamicNum').text(num)
                    }, 800)
                }

            } else {
//                $('.slide4').find('.dynamicNum').text('0')
            }
            if (index == 4) {
                if ($('.slide5').find('.dynamicNum').text() == 0) {
                    //仅第一次加载动画
                    $('.slide5').find('.dynamicNum').animatingNumber({
                        from: 0,
                        to: 2563897411,
                        duration: 1500
                    });
                    //执行完动画后继续加一
                    setTimeout(function () {
                        var num = 2563897411;
                        setInterval(function () {
                            num++
                            $('.slide5').find('.dynamicNum').text(num)
                        }, 800)
                    }, 1500)
                } else {
                    //第二次后继续加一
                    var num = parseInt($('.slide5').find('.dynamicNum').text())
                    setInterval(function () {
                        num++
                        $('.slide5').find('.dynamicNum').text(num)
                    }, 800)
                }

            } else {
//                $('.slide5').find('.dynamicNum').text('0')
            }
            if (index == 7) {
                is_scroll = true;
                boxH = iconScroll[0].clientHeight;
                scrollFu = setInterval(function () {
                    scrollTop++;
                    if (is_scroll) {
                        iconScroll.find('.icon-box').css({"transform": "translateY(-" + scrollTop + "px)"});
                        iconH = iconScroll.find('.icon-box')[0].clientHeight
                        if (iconH - (boxH + scrollTop) < 70) {
                            var pattern = /-?[1-9]\d*/;
                            for (var i = 1; i <= 14; i++) {
                                var src = "img/icon1.png";
                                var img = $('<img src="' + src.replace(pattern, i) + '" alt="" />');
                                iconScroll.find('.icon-box').append(img);
                            }
                        }
                    }
                }, 50)

            } else {
                clearInterval(scrollFu)
                scrollTop == 0;
                is_scroll = false;
            }
        }
    });

    //计时
    timeFu()
    setInterval(function () {
        timeFu();
    }, 1000)

    function timeFu() {
        var nowDate = new Date();
        var oldDate = new Date(2016, 10, 10);
        var time = nowDate - oldDate;
        var days = parseInt(time / 1000 / 60 / 60 / 24, 10);
        var hours = parseInt(time / 1000 / 60 / 60 % 24, 10);
        var minutes = parseInt(time / 1000 / 60 % 60, 10);
        var seconds = parseInt(time / 1000 % 60, 10);
        days = days >= 10 ? days : "0" + days;
        hours = hours >= 10 ? hours : "0" + hours;
        minutes = minutes >= 10 ? minutes : "0" + minutes;
        seconds = seconds >= 10 ? seconds : "0" + seconds;
        $(".days").html(days);
        $(".hours").html(hours);
        $(".minutes").html(minutes);
        $(".seconds").html(seconds);
    }

    var audio = $(".play");
    //暂停与播放
    $('.play-btn').click(function () {
        if (audio[0].paused) {
            audio[0].play();
            $(this).addClass('on')
        } else {
            audio[0].pause();
            $(this).removeClass('on')
        }

    })
    //首次进来主动触发播放事件
    $('.play-bg').on('touchstart', function () {
        audio[0].play();
        $(this).hide();
    })
    $(".share-btn").click(function () {
        $(".share-bg").show();
    })
    $(".share-bg").click(function () {
        $(this).hide();
    })
    $(".slide7-cont").click(function () {
        $("video")[0].play();
    })
    setInterval(function () {
        console.log(1)
        if(!$('video')[0].paused){
            console.log(2)
            audio[0].pause();
            $('.play-btn').removeClass('on')
        }
    },500)
</script>
<script src="//res.wx.qq.com/open/js/jweixin-1.2.0.js" type="text/javascript" charset="utf-8"></script>
<script>
    document.write('<script src="http://game.yingxiong.com/common/cawx/cawxjs.php?url=' + encodeURIComponent(location.href) + '"><\/script>');
</script>
<script>
    $(function () {
        console.log(wx_conf)
        wx.config({
            debug: true,
            appId: wx_conf.appId,
            timestamp: wx_conf.timestamp,
            nonceStr: wx_conf.nonceStr,
            signature: wx_conf.signature,
            jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareQZone']
        });
        wx.ready(function () {
            var share = {
                title: '全球争霸来袭，与策划面对面，赢专属社区勋章',
                desc: '仿佛打开了新世界的大门~',
                imgurl: '<{$smarty.const.STATIC_MAIN}>ifsg/h5/jws11.9/img/img2_11.png',
                link: window.location.href,
            }
            wx.onMenuShareTimeline({
                title: share.title,
                desc: share.desc,
                link: share.link,
                imgUrl: share.imgurl,
                success: function () {
                    $.get('h5/jws/thank-ajax-share.html', {}, function () {

                    });
                },
            });
            //分享给好友
            wx.onMenuShareAppMessage({
                title: share.title,
                desc: share.desc,
                link: share.link,
                imgUrl: share.imgurl,
                success: function () {
                    $.get('h5/jws/thank-ajax-share.html', {}, function () {

                    });
                },
            });
            //分享给QQ好友
            wx.onMenuShareQQ({
                title: share.title,
                desc: share.desc,
                link: share.link,
                imgUrl: share.imgurl,
                success: function () {
                    $.get('h5/jws/thank-ajax-share.html', {}, function () {

                    });
                },
            });
            //分享给QQ空间
            wx.onMenuShareQZone({
                title: share.title,
                desc: share.desc,
                link: share.link,
                imgUrl: share.imgurl,
                success: function () {
                    $.get('h5/jws/thank-ajax-share.html', {}, function () {

                    });
                }
            });
        });
    })
</script>
</html>